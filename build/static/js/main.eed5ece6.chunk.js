(this["webpackJsonpmessages-prototype"]=this["webpackJsonpmessages-prototype"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,s){},function(e,t,s){},,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(6),r=s.n(a),o=(s(15),s(3)),i=s(4),u=s.p+"static/media/iphone.d3f4ec0d.png",l=s.p+"static/media/square.2d24f7b0.png",h=(s(16),s(1));var d=Object(o.a)((function(e){var t=e.conversation,s=e.sendMessage,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],o=a[1],d=Object(n.useRef)();return Object(n.useEffect)((function(){d&&d.current&&d.current.scroll({behavior:"smooth",left:0,top:d.current.scrollHeight})}),[t]),Object(h.jsxs)("div",{className:"CustomerPane",children:[Object(h.jsx)("img",{src:u,alt:"Customer",className:"phone"}),Object(h.jsxs)("div",{className:"screen",children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("div",{className:"square-container",children:Object(h.jsx)("img",{src:l,alt:"Square",className:"square"})}),Object(h.jsx)("span",{className:"square-text",children:"Square"})]}),Object(h.jsx)("div",{className:"body",ref:d,children:Object(h.jsx)("div",{className:"body-content",children:t.map((function(e,t){return Object(h.jsx)("div",{className:"customer"===e.speaker?"utterance-user":"utterance-other",children:e.text},t)}))})}),Object(h.jsx)("div",{className:"footer",children:Object(h.jsx)("input",{className:"input",value:r,onChange:function(e){return o(e.target.value)},placeholder:"Text message",onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(s(r,"customer"),o(""))}})})]})]})})),j=s.p+"static/media/sparkle.8272ace5.svg";s(19),s(20);var p=Object(o.a)((function(e){var t=e.value,s=e.prediction,c=e.placeholder,a=e.onChange,r=e.onKeyDown,o=e.fetchAutoComplete,u=""===s?t:s;""!==t&&"\n"===t.charAt(t.length-1)&&(u+=" ");var l=Object(n.useRef)(),d=Object(n.useState)(1),j=Object(i.a)(d,2),p=j[0],m=j[1];Object(n.useEffect)((function(){l&&l.current&&(l.current.scrollHeight>17?m(l.current.scrollHeight/17):m(1))}),[t,s]);var b=Object(n.useRef)();return Object(n.useEffect)((function(){""!==t?(clearTimeout(b.current),b.current=setTimeout((function(){o(t)}),1e3)):clearTimeout(b.current)}),[t,o]),Object(h.jsxs)("div",{className:"MessageInput",children:[Object(h.jsx)("div",{className:"MessageInput__suggestion",ref:l,children:u}),Object(h.jsx)("textarea",{className:"MessageInput__input",rows:p,placeholder:c,value:t,onChange:a,onKeyDown:r})]})}));var m=Object(o.a)((function(e){var t=e.conversation,s=e.sendMessage,c=e.autoReply,a=e.autoComplete,r=e.fetchAutoComplete,o=Object(n.useState)(""),u=Object(i.a)(o,2),l=u[0],d=u[1],m=Object(n.useRef)();return Object(n.useEffect)((function(){m&&m.current&&m.current.scroll({behavior:"smooth",left:0,top:m.current.scrollHeight})}),[t,c]),Object(h.jsxs)("div",{className:"MessagesPane",children:[Object(h.jsx)("div",{className:"header",children:"John Doe"}),Object(h.jsx)("div",{className:"body",ref:m,children:Object(h.jsxs)("div",{className:"body-content",children:[t.map((function(e,t){return Object(h.jsxs)("div",{className:"merchant"===e.speaker?"row-user":"row-other",children:["customer"===e.speaker?Object(h.jsx)("div",{className:"picture",children:"JD"}):null,Object(h.jsx)("div",{className:"merchant"===e.speaker?"utterance-user":"utterance-other",children:e.text})]},t)})),""!==c?Object(h.jsxs)("div",{className:"row-user",children:[Object(h.jsxs)("div",{className:"utterance-suggestion",children:[Object(h.jsxs)("div",{className:"utterance-suggestion-header",children:[Object(h.jsx)("img",{src:j,alt:"Suggestion",className:"sparkle"}),"Smart Reply"]}),c]}),Object(h.jsxs)("div",{className:"utterance-send-status",children:["Not delivered. ",Object(h.jsx)("span",{className:"underline",onClick:function(){return s(c,"merchant")},children:"Send"})]})]}):null]})}),Object(h.jsx)("div",{className:"footer",children:Object(h.jsx)(p,{value:l,prediction:""!==l&&a.startsWith(l)?a:"",fetchAutoComplete:r,placeholder:"Send via text",onChange:function(e){return d(e.target.value)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s(l,"merchant"),d("")),"Tab"===e.key&&(e.preventDefault(),d(a))}})})]})}));s(21);var b=Object(o.a)((function(e){var t=e.controller;return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(d,{conversation:t.conversation,sendMessage:t.sendMessage}),Object(h.jsx)(m,{conversation:t.conversation,sendMessage:t.sendMessage,autoReply:t.autoReply,autoComplete:t.autoComplete,fetchAutoComplete:t.fetchAutoComplete})]})})),f=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,23)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),c(e),a(e),r(e)}))},v=s(10),O=s(9),g=s(2),x=new function e(){var t=this;Object(O.a)(this,e),this.conversation=[],this.autoReply="",this.autoComplete="",this.sendMessage=function(e,s){t.conversation=[].concat(Object(v.a)(t.conversation),[{text:e,speaker:s}]),"customer"===s?t.fetchAutoReply(e):t.autoReply=""},this.fetchAutoReply=function(e){fetch("http://localhost:9999/post/feedback_bot",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_input:e,mode:"auto-reply"})}).then((function(e){return e.json()})).then((function(e){var s=e.result.prediction;s&&s.length>0&&(t.autoReply=s[0])}))},this.fetchAutoComplete=function(e){var s="";if(t.conversation.length>0){var n=t.conversation[t.conversation.length-1];"customer"===n.speaker&&(s=n.text)}fetch("http://localhost:9999/post/feedback_bot",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_input:s,merchant_input:e,mode:"auto-complete",auto_complete_length:5})}).then((function(e){return e.json()})).then((function(e){var s=e.result.prediction;s&&s.length>0&&(t.autoComplete=s[0])}))},this.conversation=[{text:"Hello",speaker:"merchant"},{text:"How are you?",speaker:"customer"}],Object(g.l)(this)};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(b,{controller:x})}),document.getElementById("root")),f()}],[[22,1,2]]]);
//# sourceMappingURL=main.eed5ece6.chunk.js.map
